<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Health Monitoring</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="p-6 max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold text-center mb-6">
      üåç Smart Health Monitoring Dashboard
    </h1>

    <!-- Alerts -->
    <div id="alerts" class="hidden bg-red-100 p-4 rounded-lg shadow mb-6"></div>

    <!-- Sensor Data Table -->
    <div class="overflow-x-auto bg-white p-4 rounded-lg shadow">
      <table class="w-full border-collapse">
        <thead>
          <tr class="bg-gray-200">
            <th class="p-2 border">Location</th>
            <th class="p-2 border">Temperature (¬∞C)</th>
            <th class="p-2 border">pH</th>
            <th class="p-2 border">Turbidity (NTU)</th>
          </tr>
        </thead>
        <tbody id="sensorTable"></tbody>
      </table>
    </div>
  </div>

  <script>
    // Simulated IoT sensor data
    const locations = ["Village A", "Village B", "Village C"];

    function getRandomData() {
      return locations.map(loc => ({
        location: loc,
        temperature: (20 + Math.random() * 10).toFixed(1),
        ph: (6 + Math.random() * 2).toFixed(1),
        turbidity: (Math.random() * 10).toFixed(1)
      }));
    }

    function updateDashboard() {
      const sensorData = getRandomData();
      const table = document.getElementById("sensorTable");
      const alertsDiv = document.getElementById("alerts");
      table.innerHTML = "";

      let alerts = [];

      sensorData.forEach(d => {
        // Add row
        const row = `
          <tr class="text-center">
            <td class="p-2 border">${d.location}</td>
            <td class="p-2 border">${d.temperature}</td>
            <td class="p-2 border">${d.ph}</td>
            <td class="p-2 border">${d.turbidity}</td>
          </tr>`;
        table.innerHTML += row;

        // Generate alert if water unsafe
        if (d.ph < 6.5 || d.ph > 8.5 || d.turbidity > 5) {
          alerts.push(
            ‚ö† Risk at <b>${d.location}</b> ‚Üí pH: ${d.ph}, Turbidity: ${d.turbidity}
          );
        }
      });

      if (alerts.length > 0) {
        alertsDiv.classList.remove("hidden");
        alertsDiv.innerHTML =
          <h2 class="text-xl font-semibold text-red-700 mb-2">Alerts Detected</h2> +
          `<ul class="list-disc ml-6">${alerts.map(a => <li>${a}</li>).join("")}</ul>`;
      } else {
        alertsDiv.classList.add("hidden");
      }
    }

    // Update every 5 seconds
    updateDashboard();
    setInterval(updateDashboard, 5000);
  </script>
</body>
</html>